# =======================================================================================================================================
# Project:     IPA | L-DHP (Lightweight-Data Hub Plattform)
# Pass-ID:     X9448776
# Author:      Atakan Ã‡etinkaya 
# Created:     24.04.2023
# Description: This .TXT (k8s_dashboard.txt) File is explaining how to setup the K8s-Dashboard
# File Name:   k8s_dashboard.txt
# Version: -
# v0.1 | Last Edit: 24.04.2023/09:43:15
# v0.2 | Last Edit: 24.04.2023/10:09:51
# v0.3 | Last Edit: 24.04.2023/10:12.15
# =======================================================================================================================================
-----------------------------------------------------------------------------------------------------------------------------------------
1.0) Create the Deployment "k8s-dashboard.yaml"

kubectl apply -f k8s-dashboard.yaml
-----------------------------------------------------------------------------------------------------------------------------------------
2.0) Create the Secret     "k8s-secret.yaml"

kubectl apply -f k8s-secret.yaml
-----------------------------------------------------------------------------------------------------------------------------------------
3.0) Execute this Command after the Deployment and Secret is created. It reveals the "Secret-Token" to access the K8s-Dashboard:

kubectl -n kubernetes-dashboard describe secret $(kubectl -n kubernetes-dashboard get secret | grep dashboard-token | awk '{print $1}')
---
3.1) After excuting the command at "3.0" you will get the Token revealed from the Secret at step "2.0":

eyJhbGciOiJSUzI1NiIsImtpZCI6IjN1Nko4MERBLVRhX0NBbmdTeTZIaWdXTWxuZzlBZndUNFNxcUhDdWhZcjgifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtdG9rZW4iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiM2JlNWQ3MWEtMGU3Ni00NDcxLWE0OGEtMmVjMmJlYzMwOGRlIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.vbGal0CxFnFdtHXYJH21BxQ50XpdJwIQcZnNFapzh3CnKYRiD0IrXy1s8jwOapY61hutWe4LlCAXS3MAys6GLcYZH2XsfMP-UEVd8ccvfhLLK23ZQDwIUj5pe1S7rCYIjRmKJN0EZ2vkJN8KRUqNBxGj6CgwuwNUyy74dERAFeDDIrwHLCA0BQJawkE1MQGqAwom7ICvogtvhg4ihWhmqAfuDnxnSML2wAnGGFHKFRcLPd4Vc-EObwfH0rdaBk3495zPV7xs07I0ntnGCRQqw-7UhkjAtbhbwBmF1BtJY4dlNG6vUp9m5AwjHr9GfNsp2NCOKvN5sNk9ILvEV2VqVg
-----------------------------------------------------------------------------------------------------------------------------------------
4.0) Now start the port-forwarding with the "kubectl" command, the way, that the Role can forward the connection:

kubectl proxy
-----------------------------------------------------------------------------------------------------------------------------------------
5.0) As next you have to start the SSH Tunneling from your Client/Laptop on the GCP where your Cluster is Located:

ssh -L 8001:localhost:8001 34.65.141.240
-----------------------------------------------------------------------------------------------------------------------------------------
6.0) Now you can access the Dashboard, with the "Token" from the step Number "3.1", Paste the following Link into the URL:

http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
-----------------------------------------------------------------------------------------------------------------------------------------
# --------------------------------------------------------------------------------------------------------------------------------------- #